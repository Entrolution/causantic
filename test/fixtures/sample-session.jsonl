{"type":"user","uuid":"u1","timestamp":"2026-01-15T10:00:00.000Z","sessionId":"sess-001","parentUuid":null,"isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"user","content":"How do I read a file in Node.js?"}}
{"type":"assistant","uuid":"a1","timestamp":"2026-01-15T10:00:05.000Z","sessionId":"sess-001","parentUuid":"u1","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"assistant","content":[{"type":"text","text":"You can read files in Node.js using the fs module. Here are the main approaches:\n\n```typescript\nimport { readFile } from 'node:fs/promises';\n\n// Async/await\nconst content = await readFile('file.txt', 'utf-8');\nconsole.log(content);\n```\n\nFor large files, use streams:\n\n```typescript\nimport { createReadStream } from 'node:fs';\nimport { createInterface } from 'node:readline';\n\nconst stream = createReadStream('large-file.txt');\nconst rl = createInterface({ input: stream });\n\nfor await (const line of rl) {\n  process.stdout.write(line);\n}\n```"}],"model":"claude-opus-4-5-20251101","stop_reason":"end_turn"}}
{"type":"user","uuid":"u2","timestamp":"2026-01-15T10:01:00.000Z","sessionId":"sess-001","parentUuid":"a1","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"user","content":"Can you show me the project structure?"}}
{"type":"assistant","uuid":"a2","timestamp":"2026-01-15T10:01:05.000Z","sessionId":"sess-001","parentUuid":"u2","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"assistant","content":[{"type":"thinking","thinking":"The user wants to see the project structure. Let me use the Glob tool to find files."},{"type":"tool_use","id":"toolu_001","name":"Glob","input":{"pattern":"**/*"}}],"model":"claude-opus-4-5-20251101","stop_reason":"tool_use"}}
{"type":"user","uuid":"u2-tr","timestamp":"2026-01-15T10:01:06.000Z","sessionId":"sess-001","parentUuid":"a2","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_001","content":"src/index.ts\nsrc/utils.ts\npackage.json\ntsconfig.json"}]}}
{"type":"assistant","uuid":"a2b","timestamp":"2026-01-15T10:01:10.000Z","sessionId":"sess-001","parentUuid":"u2-tr","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"assistant","content":[{"type":"text","text":"Here's the project structure:\n\n```\nsrc/\n  index.ts\n  utils.ts\npackage.json\ntsconfig.json\n```\n\nIt's a simple TypeScript project with a source directory containing the main entry point and utilities."}],"model":"claude-opus-4-5-20251101","stop_reason":"end_turn"}}
{"type":"user","uuid":"u3","timestamp":"2026-01-15T10:02:00.000Z","sessionId":"sess-001","parentUuid":"a2b","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"user","content":"Let me look at the index.ts file"}}
{"type":"assistant","uuid":"a3","timestamp":"2026-01-15T10:02:05.000Z","sessionId":"sess-001","parentUuid":"u3","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"assistant","content":[{"type":"tool_use","id":"toolu_002","name":"Read","input":{"file_path":"/test/src/index.ts"}}],"model":"claude-opus-4-5-20251101","stop_reason":"tool_use"}}
{"type":"user","uuid":"u3-tr","timestamp":"2026-01-15T10:02:06.000Z","sessionId":"sess-001","parentUuid":"a3","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_002","content":"import { greet } from './utils.js';\n\nconst name = process.argv[2] ?? 'World';\nconsole.log(greet(name));"}]}}
{"type":"assistant","uuid":"a3b","timestamp":"2026-01-15T10:02:10.000Z","sessionId":"sess-001","parentUuid":"u3-tr","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"assistant","content":[{"type":"text","text":"The index.ts file is a simple entry point that imports a `greet` function from utils and calls it with a command-line argument (defaulting to 'World')."}],"model":"claude-opus-4-5-20251101","stop_reason":"end_turn"}}
{"type":"user","uuid":"u4","timestamp":"2026-01-15T10:03:00.000Z","sessionId":"sess-001","parentUuid":"a3b","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"user","content":"Add error handling to the index.ts file"}}
{"type":"assistant","uuid":"a4","timestamp":"2026-01-15T10:03:05.000Z","sessionId":"sess-001","parentUuid":"u4","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"assistant","content":[{"type":"tool_use","id":"toolu_003","name":"Edit","input":{"file_path":"/test/src/index.ts","old_string":"import { greet } from './utils.js';\n\nconst name = process.argv[2] ?? 'World';\nconsole.log(greet(name));","new_string":"import { greet } from './utils.js';\n\ntry {\n  const name = process.argv[2] ?? 'World';\n  console.log(greet(name));\n} catch (error) {\n  console.error('Failed:', error instanceof Error ? error.message : error);\n  process.exit(1);\n}"}}],"model":"claude-opus-4-5-20251101","stop_reason":"tool_use"}}
{"type":"user","uuid":"u4-tr","timestamp":"2026-01-15T10:03:06.000Z","sessionId":"sess-001","parentUuid":"a4","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_003","content":"File edited successfully."}]}}
{"type":"assistant","uuid":"a4b","timestamp":"2026-01-15T10:03:10.000Z","sessionId":"sess-001","parentUuid":"u4-tr","isSidechain":false,"slug":"test-session","cwd":"/test","message":{"role":"assistant","content":[{"type":"text","text":"I've wrapped the main logic in a try-catch block that handles errors gracefully and exits with code 1 on failure."}],"model":"claude-opus-4-5-20251101","stop_reason":"end_turn"}}
{"type":"progress","uuid":"p1","timestamp":"2026-01-15T10:03:11.000Z","sessionId":"sess-001","parentUuid":"a4b","isSidechain":false,"data":{"type":"hook_progress"},"parentToolUseID":"toolu_003","toolUseID":"toolu_003"}
{"type":"file-history-snapshot","messageId":"snap1","snapshot":{"messageId":"snap1","trackedFileBackups":{},"timestamp":"2026-01-15T10:03:12.000Z"},"isSnapshotUpdate":false}
